- sensor:
  - unique_id: electricity_rate
    name: Electric Ireland Weekender (Sunday)
    unit_of_measurement: 'EUR/kWh'
    state: >
      {% set time = { "month": (now().strftime('%m') | int), "hour": (now().strftime('%H') | int), "weekday": (now().weekday() | int ) } %}
      {% set tariff = { "Peak": 0.40, "Weekend": 0.0, "OffPeak": 0.40 } %}

      {%if ( (time.weekday == 6) and (time.hour > 8) and (time.hour < 23) ) %}
          {{ tariff.Weekend }}
      {%else%}
          {{ tariff.Peak }}
      {%endif%}